<!DOCTYPE html>
<html>
  <head>
    <title>XD <%= yield(:page_title) %></title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag "https://js.stripe.com/v2/", type: 'text/javascript' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <%= tag :meta, :name => "stripe-key", :content => STRIPE_PUBLIC_KEY %>
  </head>

  <body>
    <nav class="navbar navbar-static-top" >
      <div class="container">
        <ul class="nav navbar-nav">
          <li class="nav-item">
            <%= link_to root_path, class: "nav-link offset-md-3" do %>
            <i class="fa fa-home fa-lg"></i>
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to "Community", temp_path, class: "nav-link" %>
          </li>
          <li class="nav-item">
            <%= link_to "Blog", posts_path, class: "nav-link" %>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="http://example.com" id="supportedContentDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dropdown</a>
            <div class="dropdown-menu" aria-labelledby="supportedContentDropdown">
              <a class="dropdown-item" href="#">Action</a>
              <a class="dropdown-item" href="#">Another action</a>
              <a class="dropdown-item" href="#">Something else here</a>
            </div>
          </li>
        </ul>
        <ul class="nav navbar-nav float-md-right">
          <li class="nav-item signup">
            <%= link_to "Sign Up", signup_path, class: "nav-link" if user_signed_in? != true %>
          </li>
          <% if current_user.profile %>
            <li class="nav-item">
              <h6 class="col-md-2">Welcome, <%= current_user.profile.user_name %></h6>
            </li>
          <% else %>
            <li class="nav-item">
              <h6 class="col-md-2">Welcome, <%= current_user.email %></h6>
            </li>
          <% end %>
          <% if user_signed_in? %>
            <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="http://website.com/profile" id="supportedContentDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa fa-bars"></i></a>
            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu">
              <% if current_user.profile %>
                <li class="dropdown-item"><%= link_to "Profile", user_path(current_user.id) %></li>
              <% else %>
                <li class="dropdown-item"><%= link_to "Create Profile", new_user_profile_path(user_id: current_user.id) %></li>
              <% end %>
              <a class="dropdown-item" href="#">Another action</a>
              <a class="dropdown-item" href="#">Something else here</a>
              <li class="dropdown-item"><%= link_to "Test", root_path %></li>
              <div class="dropdown-divider"></div>
              <li class="dropdown-item"><%= link_to "Sign Out", destroy_user_session_path, method: :delete %></li>
            </ul>
          <% else %>
            <%= link_to user_session_path, class: "nav-link" do %>Sign In <i class="fa fa-sign-in fa-lg"></i>
            <% end %>
          <% end %>
          </li>
        </ul>
      </div>
    </nav>
    
    <div class="container flash-container">
      <% flash.each do |type, msg| %>
        <%= content_tag :div, msg, class: "alert alert-#{type}" %>
      <% end %>
    </div>

        <%= yield %>

  </body>
</html>
